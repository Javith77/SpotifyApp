<app-loading *ngIf="loading"></app-loading>

<div *ngIf="!loading" class="card text-white bg-dark animated fadeIn mb-3">
  <div class="row g-0">
    <div class="col-md-4">
      <img [src]="artist.images | notimage" class="figure-img img-fluid roundrounded-started">
    </div>
    <div class="col-md-8">
      <div class="card-header">
        <h4>{{ artist.name }} <button [routerLink]="['/search']" type="button"
            class="btn btn-danger btn-sm float-end">Regresar</button></h4>
      </div>
      <ul class="list-group list-group-flush ">
        <li class="list-group-item text-white bg-dark">
          <div class="me-auto mb-2">
            <div class="fw-bold">Genres:</div>
          </div>
          <span class="badge bg-primary" *ngFor="let genre of artist.genres">
            {{ genre }}
          </span>
        </li>
        <li class="list-group-item text-white bg-dark d-flex justify-content-between align-items-start">
          <div class="me-auto">
            <div class="fw-bold mb-2">Followers</div>
            <a href="{{ artist.external_urls.spotify }}" class="btn btn-outline-danger btn-sm m-1" target="_black">
              Go to artist page</a>
          </div>
          <span class="badge bg-danger rounded-pill">{{ artist.followers.total }}</span>
        </li>
        <li class="list-group-item text-white bg-dark align-items-start">
          <div class="me-auto mb-2">
            <div class="fw-bold"> Popularity: {{ artist.popularity }}%</div>
          </div>
          <div class="progress">
            <div class="progress-bar progress-bar-striped bg-danger progress-bar-animated" role="progressbar"
              style="width: {{ artist.popularity }}%"></div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="col-md-12">
  <table class="table table-dark table-hover">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Photo</th>
        <th scope="col">Album</th>
        <th scope="col">track</th>
        <th scope="col">preview</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let track of topTracks; let i = index">
        <th scope="row">{{ i + 1 }}</th>
        <td><img [src]="track.album.images | notimage" class="figure-img img-fluid roundrounded-started img-thumb"></td>
        <td>{{ track.album.name }} ({{ track.album.release_date | date }})</td>
        <td>{{ track.name }}</td>
        <td>
          <audio [src]="track.preview_url" controls>
          </audio>
        </td>
    </tbody>
  </table>
</div>
